@{
    ViewData["Title"] = "Home Page";
    Layout = "~/Views/Shared/AdminLTE/_Layout.cshtml";
}
@using System.Linq;
@model MagazynApp.ViewModel.HomeChartsViewModel
@{
    var PieX = Newtonsoft.Json.JsonConvert.SerializeObject(Model.ProductTypesPieChart.Select(x => x.Name).ToList());
    var PieY = Newtonsoft.Json.JsonConvert.SerializeObject(Model.ProductTypesPieChart.Select(x => x.Quantity).ToList());
    var LineX = Newtonsoft.Json.JsonConvert.SerializeObject(Model.OrderLineChart.Select(x => x.OrderDate).ToList());
    var LineY = Newtonsoft.Json.JsonConvert.SerializeObject(Model.OrderLineChart.Select(x => x.Quantity).ToList());

}

<!DOCTYPE html>




<div class="text-center">
    <h1 class="display-4">
        Witaj w magazynie
    </h1>
    <p>Magazyn zawiera @ViewBag.products_number rodzajów produktów</p>

</div>

@*<div class="box-body">
        <div class="chart-container">
            <canvas id="chart" style="width:100%; height:500px"></canvas>
        </div>
    </div>*@





<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6">
                <!-- PIE CHART -->
                <div class="card card-danger">
                    <div class="card-header">
                        <h3 class="card-title">Rordzaje produktów</h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-tool" data-card-widget="remove">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <canvas id="ProductTypeChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
            </div>
            <!--right col-->
            <div class="col-md-6">
                <!-- LINE CHART -->
                <div class="card card-info">
                    <div class="card-header">
                        <h3 class="card-title">Zamówienia wychodzące</h3>

                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                <i class="fas fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-tool" data-card-widget="remove">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="chart">
                            <canvas id="OrderLineChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                        </div>
                    </div>
                    <!-- /.card-body -->
                </div>
                <!-- /.card -->
            </div>
        </div>

        <!-- /.row -->
    </div><!-- /.container-fluid -->
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script type="text/javascript">

            $(function () {
        var chartName = "ProductTypeChart";
            var ctx = document.getElementById(chartName).getContext('2d');
            var data = {
                    labels: @Html.Raw(PieX),
                    datasets: [{
                        label: "Products Chart",
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)',
                            'rgba(255, 0, 0)',
                            'rgba(0, 255, 0)',
                            'rgba(0, 0, 255)',
                            'rgba(192, 192, 192)',
                            'rgba(255, 255, 0)',
                            'rgba(255, 0, 255)'
                        ],
                        borderColor: [
                            'rgba(255,99,132,1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 0, 0)',
                            'rgba(0, 255, 0)',
                            'rgba(0, 0, 255)',
                            'rgba(192, 192, 192)',
                            'rgba(255, 255, 0)',
                            'rgba(255, 0, 255)'
                        ],
                        borderWidth: 1,
                        data: @Html.Raw(PieY)
        }]
                };



           var myChart = new  Chart(ctx, {
                    data: data,
                    type:'pie'

                });
            });

</script>

<script type="text/javascript">

            $(function () {
        var chartName = "OrderLineChart";
            var ctx = document.getElementById(chartName).getContext('2d');
            var data = {
            labels: @Html.Raw(LineX),
            datasets: [{
            data: @Html.Raw(LineY),
            label: 'Zamówienia',
            fill: false,

            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1
        }]
    };


           var myChart = new  Chart(ctx, {
                    data: data,
                    type:'line'

                });
            });

</script>

